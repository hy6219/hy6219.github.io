# ì„œë¸”ë¦¿ ê¸°ë³¸ êµ¬ì¡°

ì„œë¸”ë¦¿ì€ Server+Appletì˜ í•©ì„±ì–´ë¡œ, ìë°” ì½”ë“œ ë‚´ë¶€ì— html ë¬¸ì„œë¥¼ í’ˆê³  ìˆëŠ” í˜•íƒœë¥¼ ë³´ì¸ë‹¤!

- **ì„œë¸”ë¦¿ : HttpServletí´ë˜ìŠ¤(javax.servlet.http íŒ¨í‚¤ì§€ì—ì„œ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤)ë¥¼ ìƒì† ë°›ì•„ ë§Œë“  ì„œë¸Œ í´ë˜ìŠ¤**

1. ì„œë¸”ë¦¿ì„ ìš”ì²­í•˜ê¸° ìœ„í•œ URL

![https://github.com/hy6219/TIL-Today-I-Learned-/blob/main/JSP%20Servlet/Basic/%EC%84%9C%EB%B8%94%EB%A6%BF%EC%9D%84%20%EC%9A%94%EC%B2%AD%ED%95%98%EA%B8%B0%20%EC%9C%84%ED%95%9C%20url.png?raw=true](https://github.com/hy6219/TIL-Today-I-Learned-/blob/main/JSP%20Servlet/Basic/%EC%84%9C%EB%B8%94%EB%A6%BF%EC%9D%84%20%EC%9A%94%EC%B2%AD%ED%95%98%EA%B8%B0%20%EC%9C%84%ED%95%9C%20url.png?raw=true)

ì„œë¸”ë¦¿ì„ ìš”ì²­í•˜ê¸° ìœ„í•œ URL

ì„œë¸”ë¦¿ì„ ìš”ì²­í•˜ê¸° ìœ„í•œ url(ìš°ë¦¬ê°€ ì„œë¸”ë¦¿ íŒŒì¼ì„ ì‘ì„±í•´ì„œ ì‹¤í–‰í•˜ë©´ ëœ¨ëŠ” ì£¼ì†Œ)ëŠ” ìœ„ì™€ ê°™ì€ í˜•ì‹ì„ ì§€ë‹Œë‹¤. ê°ê° ì–´ë–¤ ì˜ë¯¸ë¥¼ ì§€ë‹ˆëŠ”ì§€ ì¡°ëª©ì¡°ëª© ëœ¯ì–´ë³´ì

ğŸ‘ ì„œë¸”ë¦¿ ìš”ì²­ url íŒ¨í„´ì€ jspíŒŒì¼ì— ëŒ€í•œ ìš”ì²­ì´ ìˆì„ ê²½ìš°, hello.jsp ë“±ìœ¼ë¡œ í‘œì‹œëœë‹¤!(jsp ìš”ì²­)

- [http://localhost:8181](http://localhost:8181) - í†°ìº£ì„œë²„ì— ì ‘ì†í•˜ê² ìŒì„ ì˜ë¯¸

1) [http://localhost](http://localhost) - ì›¹ ì„œë²„ì— ì ‘ì†í•˜ê¸° ìœ„í•œ **IPì£¼ì†Œ** [localhostì˜ ip ì£¼ì†ŒëŠ” 127.0.0.1]

2) : 8181 - í†°ìº£ì„ ì„¤ì¹˜í•˜ë©´ì„œ ì„¤ì •í•œ **í¬íŠ¸ë²ˆí˜¸**

- /myProject : **ì»¨í…ìŠ¤íŠ¸ íŒ¨ìŠ¤(Context Path)**

*ì›¹ ì„œë²„ì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¤‘ ì–´ë–¤ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ìˆ˜í–‰í•  ê²ƒì¸ì§€ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê°œë…

*ì»¨í…ìŠ¤íŠ¸ íŒ¨ìŠ¤ == í”„ë¡œì íŠ¸ ì´ë¦„ == ì†ŒìŠ¤ê°€ ìˆëŠ” ê²½ë¡œ == context rootì—ì„œ ì…ë ¥í•œ ê°’!

*í†°ìº£ ì„œë²„ì— ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡í•˜ê¸°[server.xml íŒŒì¼]

(ì´í´ë¦½ìŠ¤ì—ì„œëŠ” ìë™ìœ¼ë¡œ ì‘ì„±ë˜ëŠ”ë°, ctrl+shift+F í˜¹ì€ source-Formatì„ ì´ìš©í•˜ì—¬ ë“¤ì—¬ì“°ê¸° ì²˜ë¦¬í•˜ì—¬ í•œ ì¤„ë¡œ ì‘ì„±ëœ ë¶€ë¶„ì„ êµ¬ì¡°í™”í•´ì„œ í™•ì¸ ê°€ëŠ¥)

```html
<Context docBase="í”„ë¡œì íŠ¸ëª…" path="/í”„ë¡œì íŠ¸ëª…" reloadable="true" 
source="org.eclipse.jst.jee.server:ì»¨í…ìŠ¤íŠ¸íŒ¨ìŠ¤ëª…" />
```

ìœ„ì˜ í•œ ì¤„ì—ì„œ pathì— /í”„ë¡œì íŠ¸ëª… ìœ¼ë¡œ ê¸°ë¡ì„ í•´ë‘ ìœ¼ë¡œì¨ í†°ìº£ì„œë²„ì…ì¥ì—ì„œ ì»¨í…ìŠ¤íŠ¸ íŒ¨ìŠ¤ë¥¼ ì¸ì‹í•  ìˆ˜ ìˆê²Œ ëœë‹¤!

- Content directory : ì›¹ í”„ë¡œê·¸ë˜ë°ì„ í•˜ë©´ì„œ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì§€ëŠ” jsp í˜ì´ì§€ë‚˜ ì´ë¯¸ì§€ì™€ ê°™ì€ ìì›(content)ë¥¼ ì €ì¥í•´ë‘ëŠ” ê²½ë¡œ

2.  URL ë§¤í•‘(@WebServlet ì–´ë…¸í…Œì´ì…˜) && ì§ë ¬í™”ë¥¼ í†µí•œ í´ë˜ìŠ¤ ë²„ì „ì— ë”°ë¥¸ ê³ ìœ  ë²ˆí˜¸ í¬í•¨ &&

    public + HttpServlet

```java
package unit01;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

**ğŸ“Œ@WebServlet("/hello")ğŸ“Œ**
âš ï¸**public class HelloServlet extends HttpServlet**âš ï¸ {
	ğŸŒŸ**private static final long serialVersionUID = 1L;//í´ë˜ìŠ¤ ë²„ì „ ê³ ìœ ë²ˆí˜¸**ğŸŒŸ
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public HelloServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

	/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		response.getWriter().append("Served at: ").append(request.getContextPath());

	
	}

}
```

**a) URL ë§¤í•‘(í•„ìˆ˜)!**

- ì„œë¸”ë¦¿ì„ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•´ì„œ ì‹¤ì œ ìë°” í´ë˜ìŠ¤ëª…ì„ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹  ì„œë¸”ë¦¿ì„ ìš”ì²­í•˜ê¸° ìœ„í•œ ë¬¸ìì—´ì„ ì„œë¸”ë¦¿ í´ë˜ìŠ¤ì™€ ë§¤í•‘ì‹œí‚¤ëŠ” ê²ƒ
- ì‰½ê²Œ ë§í•˜ë©´, ì„œë¸”ë¦¿ í´ë˜ìŠ¤ì˜ ë³„ì¹­!
- ì‚¬ìš© ëª©ì  :

    -ì‹¤ì œ ì„œë¸”ë¦¿ í´ë˜ìŠ¤ë¥¼ ê³µê°œí•˜ì§€ ì•Šê¸° ìœ„í•¨(ë³´ì•ˆ)

    -ì‹¤ì œ ë¬¼ë¦¬ì  ìœ„ì¹˜ ì •ë³´ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì‚¬ìš©ìê°€ ì‹¤ì œ ê²½ë¡œì™€ íŒŒì¼ëª…ì„ ì§ì ‘ ì…ë ¥í•  í•„ìš”ê°€ ì—†ìŒ

    -ê°œë°œìê°€ ì„œë¸”ë¦¿ ì´ë¦„ì„ ë°”ê¾¸ë”ë¼ë„ ì‚¬ìš©ìëŠ” ë™ì¼ urlë¡œ ì ‘ê·¼ ê°€ëŠ¥

- ì‚¬ìš© ë°©ë²• : @WebServlet ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë§¤í•‘ ê°€ëŠ¥(servlet 3.0~)
- ì„œë¸”ë¦¿ 3.0 ì´ì „ì—ëŠ” web.xmlì—ì„œ ë§¤í•‘í•˜ì˜€ëŠ”ë°, ì´ë¡œ ì¸í•œ ë¶ˆí¸í•¨ì´ ì¡´ì¬í–ˆìŒ
- ì´í´ë¦½ìŠ¤ì—ì„œëŠ” ì„œë¸”ë¦¿ì„ ìƒì„±í•  ë•Œ, URL Mapping íƒ­ì—ì„œ ìˆ˜ì •í•˜ì—¬ ì ìš© ê°€ëŠ¥

**ğŸŒŸì–´ë…¸í…Œì´ì…˜ : ì»´íŒŒì¼í•  ë•Œ í™˜ê²½ ì„¤ì •ì„ ë³€ê²½í•´ì¤„ ê²ƒì„ ì•Œë ¤ì£¼ëŠ” ì£¼ì„ í˜•íƒœğŸŒŸ**

b) ì§ë ¬í™”

ğŸŒŸë¡œ í‘œì‹œëœ ë¶€ë¶„ì„ ë³´ë©´,

```java
private static final long serialVersionUID =1L;
```

ë¡œ ë˜ì–´ ìˆëŠ”ë°, ì´ ë¶€ë¶„ì„ í†µí•´ì„œ í”„ë¡œê·¸ë¨ ê°„ì˜ ë™ê¸°í™” ë“± ë¬¸ì œë¥¼ í•´ê²°í•´ì¤„ ìˆ˜ ìˆë‹¤

c) HttpServlet í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•œ ì„œë¸Œ í´ë˜ìŠ¤ë¥¼ publicìœ¼ë¡œ ì œí•œì ì„¤ì •

- **âš ï¸ë¡œ ëœ ë¶€ë¶„ì„ ì°¸ê³ í•˜ë©´, publicìœ¼ë¡œ HttpServlet í´ë˜ìŠ¤ë¥¼ êµ¬í˜„í•œ ì„œë¸Œí´ë˜ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œí•œì‹œì¼œë‘ì—ˆëŠ”ë°, ê·¸ ì´ìœ ëŠ” ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸!**

3.  ìš”ì²­ ë©”ì„œë“œ doGet(), doPost()

- ìš”ì²­ ë°©ì‹ì— ë”°ë¼ì„œ doGet(), doPost()ê°€ ìˆ˜í–‰ë˜ê¸° ë•Œë¬¸ì— ì ì ˆí•˜ê²Œ ì˜¤ë²„ë¼ì´ë”©í•´ì£¼ì–´ì•¼ í•¨

ê°ê°ì˜ ë©”ì„œë“œëŠ” ëª¨ë‘ ê°ê° ë§¤ê°œë³€ìˆ˜ë¡œ ìš”ì²­ê³¼ ì‘ë‹µì„ ì˜ë¯¸í•˜ëŠ”

HttpServletRequest ê°ì²´ì™€ HttpServletResponse ê°ì²´ë¥¼ ì „ë‹¬ë°›ëŠ”ë‹¤

```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		response.getWriter().append("Served at: ").append(request.getContextPath());
		
	}

	/**
	 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		doGet(request, response);
	}
```

- HttpServletRequest: í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì²˜ë¦¬
**- ServletException, IOExceptionì— ëŒ€í•œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ì£¼ì–´ì•¼ í•¨(ì¼ë°˜ì ìœ¼ë¡œ throwsë¥¼ ì´ìš©)**

- HttpServletResponse: ìš”ì²­ ì²˜ë¦¬ ê²°ê³¼ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë˜ëŒë¦¬ê¸°(ì‘ë‹µí•˜ê¸°) ìœ„í•´ ì‚¬ìš©ë¨

âš ï¸ í•˜ë‚˜ì˜ ì„œë¸”ë¦¿ ë‚´ì— get ë°©ì‹, post ë°©ì‹ì— ë”°ë¼ ì„œë¡œ ë‹¤ë¥¸ ê¸°ëŠ¥ì„ ì œê³µí•´ì•¼ í•˜ëŠ” ê²½ìš°ëŠ”, doGet ë©”ì„œë“œì™€ doPost ë©”ì„œë“œ ëª¨ë‘ ì˜¤ë²„ë¼ì´ë”©í•´ì•¼ í•¨!

4. **ì‘ë‹µ ê°ì²´**ì— **ì½˜í…íŠ¸ íƒ€ì… ì§€ì •**í•˜ê¸°

```java
HttpServletResponse ê°ì²´.setContentType("ì½˜í…íŠ¸ íƒ€ì…(text/html)");

ì˜ˆ) response.setContentType("text/html");
```

- ì„œë¸”ë¦¿ì—ì„œëŠ” setContentType()ë©”ì„œë“œë¥¼ ì´ìš©í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µí•  í˜ì´ì§€ì— ëŒ€í•œ í™˜ê²½ì„¤ì •ì„ í•´ì£¼ì–´ì•¼ í•˜ëŠ”ë°,

ìœ„ì˜ ì½”ë“œì—ì„œëŠ” "text/html" ë¡œ ì„¤ì •í•´ë‘ ìœ¼ë¡œì¨, textë‚˜ htmlë¡œ ë¶€ì—¬ì£¼ê² ë‹¤ëŠ” ì˜ë¯¸ë¥¼ ë‚˜íƒ€ëƒ„

- ì„œë¸”ë¦¿ì—ëŠ” main ë©”ì„œë“œê°€ ìˆëŠ” í´ë˜ìŠ¤ì—ì„œ ì‹¤í–‰í•˜ì§€ ì•Šê³ , ì›¹ ì„œë²„ê°€ ì‹¤í–‰ì„ í•´ì£¼ëŠ” ë°©ì‹

- Event-Driven Programmingìœ¼ë¡œ ì‹¤í–‰ë¨

**ì‚¬ìš©ì ìš”ì²­** â¡ï¸ **í†°ìº£ ì„œë²„: ì„œë¸”ë¦¿ ê°ì²´ ìƒì„±** â¡ï¸ **init()** â¡ï¸ **ìš”ì²­ ë©”ì„œë“œ í˜¸ì¶œ**

4-1. í•œê¸€ ì¸ì½”ë”©ì´ ê¹¨ì§€ì§€ ì•Šë„ë¡ ì½˜í…íŠ¸ íƒ€ì…ì„ ì§€ì •í•  ë•Œ charset ì„¤ì •í•´ì£¼ê¸°

```java
HttpServletResponse ê°ì²´.setContentType("ì½˜í…íŠ¸ íƒ€ì…; ğŸ“Œ**charset=UTF-8**ğŸ“Œ");

ì˜ˆ) response.setContentType("text/html; charset= UTF-8");
```

- í•œê¸€ì´ë‚˜ í•œìëŠ” UTF-8 í˜•ì‹ì„ ì‚¬ìš©í•˜ë„ë¡ ì§€ì •í•´ì£¼ì–´ì„œ, ë‹¤ë¥¸ êµ­ê°€ì—ì„œë„ í˜¸í™˜ì´ ë  ìˆ˜ ìˆë„ë¡ ì¸ì½”ë”©ì„ ì„¤ì •í•´ì£¼ê¸°

5. ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ ì–»ì–´ì˜¤ê¸°

- HttpServletResponse ê°ì²´ì˜ ì¸ì½”ë”©ì„ ì„¤ì • í•˜ê¸° ì „ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ì„ ì–»ì–´ì˜¬ ê²½ìš°, ì¸ì½”ë”©ì´ ê¹¨ì§„ ìƒíƒœì—ì„œ ê²°ê³¼ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ğŸ“Œ**ê¼­! HttpServletResponse ê°ì²´ì˜ ì¸ì½”ë”©ì„ ì„¤ì •í•œ í›„ ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ì„ ì–»ì–´ì˜¤ë„ë¡ í•˜ì!**ğŸ“Œ

- ì„œë¸”ë¦¿ì—ì„œëŠ” ì¶œë ¥ìŠ¤íŠ¸ë¦¼ì¸ PrintWriter ê°ì²´ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•˜ì—¬ HttpServletResponse ê°ì²´ë¡œë¶€í„° ì–»ì–´ëƒ„[java.io íŒ¨í‚¤ì§€]

ğŸ“Œ

```java
PrintWriter ê°ì²´ëª… = HttpServletResponseì¸ìŠ¤í„´ìŠ¤ëª…(ë§¤ê°œë©´ìˆ˜ë¡œ ì „ë‹¬ëœ ê·¸ ì´ë¦„).getWriter();

ì˜ˆ: PrintWriter out = response.getWriter();
```

6. í´ë¼ì´ì–¸íŠ¸ì—ê²Œ HTML ë¬¸ì„œ í˜•íƒœë¡œ ê²°ê³¼ ì¶œë ¥í•˜ê¸°

- PrintWriterì˜ ë©”ì„œë“œì¸ print() ë° println() ë¥¼ ì´ìš©í•˜ì—¬ íƒœê·¸ í˜•íƒœë¡œ ì¶œë ¥

ì˜ˆ)

```java
package unit01;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/hello")
public class HelloServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;//í´ë˜ìŠ¤ ë²„ì „ ê³ ìœ ë²ˆí˜¸
       
    /**
     * @see HttpServlet#HttpServlet()
     */
    public HelloServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

	/**
	 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
	 */
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		// TODO Auto-generated method stub
		//response.getWriter().append("Served at: ").append(request.getContextPath());

		//í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µí•  í˜ì´ì§€ ì •ë³´ ì…‹íŒ…
		response.setContentType("text/html;charset= UTF-8");
		
		PrintWriter out = response.getWriter();
		out.println("<!DOCTYPE html><html><head><title>hello</title></head>");
		out.println("<body><h1>");
		out.println("HelloServlet");
		out.println("</h1>");
		out.println("</body>");
		out.println("</html>");
		out.close();
	}

}
```

7. ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ ë‹«ê¸°

ìœ„ì—ì„œ ë³¸ ì˜ˆì‹œ ì¤‘ ìµœí•˜ë‹¨ì— ìˆëŠ” ê²ƒê³¼ ê°™ì´ PrintWriter ê°ì²´.close()ë¡œ ë‹«ì•„ì£¼ë©´ ë¨

ì˜ˆ) 

```java
PrintWriterì¸ìŠ¤í„´ìŠ¤ëª….close();
â¡ï¸ out.close();

```